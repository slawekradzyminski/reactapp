{
  "id": "2017-09-29-firefox-selenium-browser-capabilities-explained",
  "title": "Firefox Selenium Browser Capabilities explained",
  "date": "2017-09-29",
  "category": "Selenium",
  "permalink": "/2017/09/firefox-selenium-browser-capabilities",
  "content": "<img src=\"/images/blog/firefox.jpg\" alt=\"\">\n\n<p>Two very important Firefox news related to Selenium were published recently:<br><br>a) Selenium IDE will no longer be supported in Firefox 55+ (<a href=\"https://seleniumhq.wordpress.com/2017/08/09/firefox-55-and-selenium-ide/\" target=\"_blank\" rel=\"noreferrer\">source</a>)<br><br>b) Headless mode is now available (<a href=\"https://developer.mozilla.org/en-US/Firefox/Headless_mode\" target=\"_blank\" rel=\"noreferrer\">source</a>)</p><p>First news isn&#39;t really that bad. Any time invested in IDE is basically wasted time, so I don&#39;t think there is too much to worry.</p><p>Second news is exciting though. I already announced it before in my <a href=\"http://www.awesome-testing.com/2017/05/headless-testing-with-google-chrome.html\" target=\"_blank\" rel=\"noreferrer\">Headless Chrome</a> before, but now it&#39;s live and ready to play with.</p><p>To be honest this post was meant to be about Headless Firefox, but upon testing it and using my code from <a href=\"http://www.awesome-testing.com/2016/02/selenium-browser-capabilities-explained.html\" target=\"_blank\" rel=\"noreferrer\">Browser Capabilities explained</a><br>post I realized it&#39;s no longer valid. Using Firefox Profiles is now deprecated. From now on we should rely on Browser Capabilities and very familiar mechanism as the one already implemented for Chrome. The code changed very recently,<br>because even official Java example in <a href=\"https://developer.mozilla.org/en-US/Firefox/Headless_mode\" target=\"_blank\" rel=\"noreferrer\">headless Firefox news</a><br>is using deprecated methods.</p><p>Before I delve deeper into headless mode (which I&#39;ll publish this month) let me show new way of handling Firefox browser in your test.</p><h2>Getting started with Gecko Driver</h2>\n<p>As you probably already know at first you need to <a href=\"https://github.com/mozilla/geckodriver/releases\" target=\"_blank\" rel=\"noreferrer\">download geckodriver</a>. On Mac it can be done be very quickly using <a href=\"https://brew.sh/index_pl.html\" target=\"_blank\" rel=\"noreferrer\">brew</a>.</p><pre><code class=\"hljs language-java\">\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">MY_GECKO_PATH</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;C:\\\\drivers\\\\geckodriver.exe&quot;</span>;\n\n    <span class=\"hljs-meta\">@BeforeTest</span>\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setUp</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">if</span> (SystemUtils.IS_OS_WINDOWS) {\n            System.setProperty(<span class=\"hljs-string\">&quot;webdriver.gecko.driver&quot;</span>, MY_GECKO_PATH);\n        }\n    }\n</code></pre><p>Windows users have to also set gecko property (it&#39;s done automatically by brew on Mac).</p><h2>Using Firefox Browser Capabilities</h2>\n<p>Using Firefox browser capabilities looks exactly as in Chrome. I&#39;m sure my readers are already very familiar with how I handle capabilities. The code almost like copy/paste from my Chrome examples.</p><pre><code class=\"hljs language-java\">\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">HOMEPAGE_KEY</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;browser.startup.homepage&quot;</span>;\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-type\">String</span> <span class=\"hljs-variable\">HOMEPAGE_VALUE</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&quot;www.google.pl&quot;</span>;\n\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-keyword\">public</span> WebDriver <span class=\"hljs-title function_\">newWebDriver</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FirefoxDriver</span>(getFirefoxCapabilities());\n    }\n\n    <span class=\"hljs-keyword\">private</span> DesiredCapabilities <span class=\"hljs-title function_\">getFirefoxCapabilities</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">DesiredCapabilities</span> <span class=\"hljs-variable\">capabilities</span> <span class=\"hljs-operator\">=</span> DesiredCapabilities.firefox();\n        capabilities.setAcceptInsecureCerts(<span class=\"hljs-literal\">true</span>);\n        capabilities.setCapability(HOMEPAGE_KEY, HOMEPAGE_VALUE);\n        capabilities.setCapability(FirefoxOptions.FIREFOX_OPTIONS, getFirefoxOptions());\n        <span class=\"hljs-keyword\">return</span> capabilities;\n    }\n\n    <span class=\"hljs-keyword\">private</span> FirefoxOptions <span class=\"hljs-title function_\">getFirefoxOptions</span><span class=\"hljs-params\">()</span> {\n        <span class=\"hljs-type\">FirefoxOptions</span> <span class=\"hljs-variable\">options</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FirefoxOptions</span>();\n        options.setLogLevel(Level.WARNING);\n        <span class=\"hljs-keyword\">return</span> options;\n    }\n</code></pre><p>Thankfully we no longer have to rely on flaky Firefox Profile solution. What&#39;s even better, especially comparing to Chrome, is documentation. <a href=\"https://github.com/mozilla/geckodriver\" target=\"_blank\" rel=\"noreferrer\">GeckoDriver GitHub page</a> have it covered very well. I encourage you to take a look.</p><p>As usual I posted all the code from above in my <a href=\"https://github.com/slawekradzyminski/AwesomeTesting/commit/e9c3470f8a7c2cebc962701b1cf901fe9766f54d\" target=\"_blank\" rel=\"noreferrer\">GitHub Awesome Testing project</a>.</p>"
}