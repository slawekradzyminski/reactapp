{
  "id": "2023-01-30-supertest-api-testing-library",
  "title": "Supertest API testing library",
  "date": "2023-01-30",
  "categories": [
    "API testing"
  ],
  "tags": [
    "API testing"
  ],
  "permalink": "/2023/01/superest-api-testing-library",
  "content": "<img src=\"/images/blog/1*R8dpDe1F8LIgCrN1QTfVBw.png\" alt=\"\">\n\n<p><a href=\"https://github.com/ladjs/supertest\" target=\"_blank\" rel=\"noreferrer\">Supertest</a> is a popular JavaScript library for testing HTTP APIs. It allows developers to send HTTP requests to their server-side code and assert that the response meets certain criteria.</p><p>One of the key benefits of using Supertest is that it is built on top of the popular testing library, Superagent. This means that it has a similar syntax and functionality, making it easy for developers who are already familiar with Superagent to get started.</p><p>Supertest also provides a number of additional features that are specifically designed for testing APIs. For example, it allows developers to easily send JSON payloads in their requests and assert that the response has the correct status code and headers.</p><p>To get started with Supertest, you will first need to install it as a dependency in your project. Once you have done this, you can import the library in your test file and use it to make requests to your server-side code.</p><p>For example, you can use the <strong><em>.get()</em></strong> method to send a GET request to your server and assert that the response has the correct status code and contains the expected data.</p><pre><code class=\"hljs language-typescript\">\n<span class=\"hljs-keyword\">const</span> request = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;supertest&#x27;</span>);\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;./app&#x27;</span>);\n\n<span class=\"hljs-title function_\">describe</span>(<span class=\"hljs-string\">&#x27;GET /&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-title function_\">it</span>(<span class=\"hljs-string\">&#x27;should return a 200 status code and a welcome message&#x27;</span>, <span class=\"hljs-title function_\">async</span> () =&gt; {\n    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">request</span>(app).<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&#x27;/&#x27;</span>);\n\n    <span class=\"hljs-title function_\">expect</span>(res.<span class=\"hljs-property\">statusCode</span>).<span class=\"hljs-title function_\">toEqual</span>(<span class=\"hljs-number\">200</span>);\n    <span class=\"hljs-title function_\">expect</span>(res.<span class=\"hljs-property\">body</span>).<span class=\"hljs-title function_\">toEqual</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">&#x27;Welcome to my API!&#x27;</span> });\n  });\n});\n</code></pre><p>In this example, the <strong><em>request(app)</em></strong> function creates a new Supertest object that is bound to our Express app, which allows us to make requests to the app&#39;s routes. The <strong><em>.get(&#39;/&#39;)</em></strong> method sends a GET request to the root route of the app and returns a promise that resolves to the response object.</p><p>Overall, Supertest is a powerful and easy-to-use library for testing APIs in JavaScript. It allows developers to write expressive and maintainable tests for their server-side code, helping to ensure that their APIs are working as expected.</p><p>For more examples and complete working project please use my <a href=\"https://github.com/slawekradzyminski/supertest-api-tests\" target=\"_blank\" rel=\"noreferrer\">GitHub project</a>.</p><br>\n\n"
}