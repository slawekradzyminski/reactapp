{
  "id": "2023-01-10-maximizing-performance-with-gatling-a-beginners-guide-to-load-testing",
  "title": "Maximizing Performance with Gatling",
  "date": "2023-01-10",
  "categories": [
    "Performance testing"
  ],
  "tags": [
    "performance testing"
  ],
  "permalink": "/2023/01/maximizing-performance-with-gatling",
  "content": "<p><img src=\"/images/blog/1582210782200.png\" alt=\"\"></p><p><a href=\"https://gatling.io\" target=\"_blank\" rel=\"noreferrer\">Gatling</a> is a powerful open-source load testing tool designed to help developers and performance engineers test the performance and scalability of their web applications. It&#39;s written in Scala and it&#39;s based on the <a href=\"https://akka.io\" target=\"_blank\" rel=\"noreferrer\">Akka</a> toolkit, which means it&#39;s highly extensible and easily integrated with other tools.</p><p>One of the key features of Gatling is its intuitive and easy-to-use DSL (domain-specific language) for building test scenarios. This allows developers to write load tests in a natural and readable language, making it easy to understand and maintain. Gatling also supports multiple protocols such as HTTP, HTTPS, WebSockets, and JMS, and it can be used to test applications written in different languages and running on different platforms.</p><p>Gatling also provides detailed and accurate results, with real-time monitoring and reporting capabilities. It generates HTML reports that provide a clear and concise overview of the test results, including request and response details,<br>response time distribution, and error statistics. Gatling also allows you to customize the reports by adding your own charts and statistics.</p><p>Another advantage of Gatling is its high performance. It&#39;s designed to handle large numbers of concurrent users, making it ideal for testing high-traffic web applications. Gatling&#39;s architecture is based on Akka, which is a high-performance toolkit for building concurrent and distributed systems. This allows Gatling to handle large numbers of requests with minimal resource usage.</p><p>In summary, Gatling is a powerful and flexible load testing tool that is easy to use and provides detailed and accurate results. Its intuitive DSL, support for multiple protocols, and high performance make it an ideal choice for testing web applications of all sizes and complexities.</p><p>It&#39;s important to note that Gatling also has a commercial version called Gatling Frontline which offer additional features like distributed testing, advanced analytics, and real-time reporting.</p><p>If you&#39;re looking for a load testing tool that is easy to use, provides detailed results, and can handle large numbers of concurrent users, then Gatling may be the perfect choice for you. So, give it a try and see how it can help you improve the performance and scalability of your web applications.</p><p>You can write Gatling tests in popular JVM languages (Java, Scala &amp; Kotlin).</p><p><strong>Scala test example</strong></p><p>Here is an example of a simple load test in Java using Gatling for a REST API endpoint that returns JSON:</p><pre><code class=\"hljs language-java\">\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SimpleLoadTest</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Simulation</span> {\n\n  <span class=\"hljs-type\">val</span> <span class=\"hljs-variable\">httpConf</span> <span class=\"hljs-operator\">=</span> http.baseUrl(<span class=\"hljs-string\">&quot;http://localhost:8080&quot;</span>)\n    .acceptHeader(<span class=\"hljs-string\">&quot;application/json&quot;</span>)\n\n  <span class=\"hljs-type\">val</span> <span class=\"hljs-variable\">scn</span> <span class=\"hljs-operator\">=</span> scenario(<span class=\"hljs-string\">&quot;Simple Load Test&quot;</span>)\n    .exec(http(<span class=\"hljs-string\">&quot;request_1&quot;</span>)\n      .get(<span class=\"hljs-string\">&quot;/api/endpoint&quot;</span>)\n      .check(status.is(<span class=\"hljs-number\">200</span>))\n      .check(jsonPath(<span class=\"hljs-string\">&quot;$.key&quot;</span>).is(<span class=\"hljs-string\">&quot;value&quot;</span>))\n    )\n\n  setUp(\n    scn.inject(\n      constantUsersPerSec(<span class=\"hljs-number\">10</span>) during (<span class=\"hljs-number\">10</span> seconds)\n    ).protocols(httpConf)\n  )\n}</code></pre><p>In this example, the test sends a GET request to the endpoint &quot;/api/endpoint&quot; on the localhost at port 8080, and expects a 200 OK response with a JSON body containing a key-value pair where the key is &quot;key&quot; and the value is &quot;value&quot;. The test will run for 10 seconds and will gradually ramp up to 10 users per second.</p><p><strong>Java test example</strong></p><p>Here is an example of a simple load test in Java using Gatling&#39;s core API for a REST API endpoint that returns JSON:</p><pre><code class=\"hljs language-typescript\"><span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">gatling</span>.<span class=\"hljs-property\">core</span>.<span class=\"hljs-property\">scenario</span>.<span class=\"hljs-property\">Simulation</span>;\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">gatling</span>.<span class=\"hljs-property\">core</span>.<span class=\"hljs-property\">structure</span>.<span class=\"hljs-property\">ScenarioBuilder</span>;\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">gatling</span>.<span class=\"hljs-property\">http</span>.<span class=\"hljs-property\">Predef</span>;\n<span class=\"hljs-keyword\">import</span> io.<span class=\"hljs-property\">gatling</span>.<span class=\"hljs-property\">http</span>.<span class=\"hljs-property\">protocol</span>.<span class=\"hljs-property\">HttpProtocolBuilder</span>;\n\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">SimpleLoadTest</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Simulation</span> {\n\n        <span class=\"hljs-title class_\">HttpProtocolBuilder</span> httpConf = <span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">http</span>().<span class=\"hljs-title function_\">baseUrl</span>(<span class=\"hljs-string\">&quot;http://localhost:8080&quot;</span>)\n                .<span class=\"hljs-title function_\">acceptHeader</span>(<span class=\"hljs-string\">&quot;application/json&quot;</span>);\n\n        <span class=\"hljs-title class_\">ScenarioBuilder</span> scn = <span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">scenario</span>(<span class=\"hljs-string\">&quot;Simple Load Test&quot;</span>)\n                .<span class=\"hljs-title function_\">exec</span>(<span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">http</span>(<span class=\"hljs-string\">&quot;request_1&quot;</span>)\n                        .<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">&quot;/api/endpoint&quot;</span>)\n                        .<span class=\"hljs-title function_\">check</span>(<span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">status</span>().<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-number\">200</span>))\n                        .<span class=\"hljs-title function_\">check</span>(<span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">jsonPath</span>(<span class=\"hljs-string\">&quot;$.key&quot;</span>).<span class=\"hljs-title function_\">is</span>(<span class=\"hljs-string\">&quot;value&quot;</span>))\n                );\n\n     {\n        <span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">setUp</span>(\n                scn.<span class=\"hljs-title function_\">inject</span>(<span class=\"hljs-title class_\">Predef</span>.<span class=\"hljs-title function_\">constantUsersPerSec</span>(<span class=\"hljs-number\">10</span>).<span class=\"hljs-title function_\">during</span>(<span class=\"hljs-number\">10</span>))\n                .<span class=\"hljs-title function_\">protocols</span>(httpConf)\n        );\n    }\n}</code></pre><p>This test sends a GET request to the endpoint &quot;/api/endpoint&quot; on the localhost at port 8080, and expects a 200 OK response with a JSON body containing a key-value pair where the key is &quot;key&quot; and the value is &quot;value&quot;. The test will run for 10 seconds and will gradually ramp up to 10 users per second.</p><p>You can find the working projects on my GitHub:</p><ul>\n<li><p>tested<br>application <a href=\"https://github.com/slawekradzyminski/test-secure-backend\" target=\"_blank\" rel=\"noreferrer\">https://github.com/slawekradzyminski/test-secure-backend</a></p></li>\n<li><p>Gatling tests in<br>Scala <a href=\"https://github.com/slawekradzyminski/performance-tests\" target=\"_blank\" rel=\"noreferrer\">https://github.com/slawekradzyminski/performance-tests</a></p></li>\n<li><p>Gatling tests in<br>Java <a href=\"https://github.com/slawekradzyminski/performance-tests-java\" target=\"_blank\" rel=\"noreferrer\">https://github.com/slawekradzyminski/performance-tests-java</a></p></li>\n</ul>\n"
}